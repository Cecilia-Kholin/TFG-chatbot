version: "3.1"

intents:
  - greet
  - ask_wellbeing
  - goodbye
  - affirm
  - deny
  - mood_great
  - mood_unhappy
  - bot_challenge
  - ask_sum
  - ask_div_int
  - ask_who_are_you
  - out_of_scope
  - agradecer
  #- theory_div #explicar de forma TEORICA la division
  #PREGUNTAS EJERCICIOS
  - request_practice_div
  - answer_division
  - tipos_division
  - elegir_division_sola_cifra
  - elegir_division_dos_cifras
  - elegir_division_decimales
  - elegir_division_residuo
  #
  - elegir_division_enunciados
  - elegir_division_sueltas
  #-
  - elegir_numero_ejercicios
  - elegir_numero_ejercicios_enunciados
  #-
  - elegir_dificultad
  - elegir_dificultad_enunciados
  - reset_slot

entities:
  - number1
  - number2
  - num_ejercicios
  - numero # para pedir los ejercicios
  - dificultad
actions:
  - action_sum
  - action_div
  - action_who_are_you
  #actions para dar ejemplos
  - action_exercises
  - action_check_division_answer
  - action_generar_ejercicios
  #- action_review_incorrect_divisions
  - action_prueba
  - action_enviar_correccion


#// =====================================================
#//                        SLOTS
#// =====================================================
slots:
#verificar si es la primera vez que se genera un ejercicio.
  first_division_request:
    type: bool
    initial_value: true
    mappings:
    - type: custom

  correct_answer:
    type: float
    influence_conversation: false
    mappings:
      - type: custom
        entity: answer_division
  
  # Slot para el nÃºmero de ejercicios seleccionados
  numero:
    type: text  
    mappings:
      - type: from_entity
        entity: numero

  numero_ejercicios:
    type: text
    mappings:
      - type: custom
        entity: numero_ejercicios
  # Slot para los ejercicios generados (sin mapeo personalizado)
  ejercicios: 
    type: any
    mappings:
      - type: custom
        entity: ejercicios
    
  current_exercise:
    type: any
    mappings:
      - type: custom
        entity: current_exercise
  
  #TIPO EJERCICIO --> SUELTAS O ENUNCIADOS
  tipo_ejercicio:
    type: text
    mappings:
      - type: from_intent
        intent: elegir_division_sueltas
        value: "sueltas"
      - type: from_intent
        intent: elegir_division_enunciados
        value: "enunciados"
  #Dificultad EJERCICIO
  dificultad:
    type: categorical
    values:
      - fÃ¡cil
      - medio
      - difÃ­cil
      - experto
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: dificultad  # Obtiene el valor de la entidad "dificultad"

#Se guardan las respuestas incorrectas
  incorrect_divisions:
    type: list
    initial_value: []
    influence_conversation: false
    mappings:
      - type: custom
 

#// =====================================================
#//               RESPUESTAS DEL CHATBOT
#// =====================================================
responses:
# cuidado con esto, si en la acciÃ³n ya tengo resouestas esto sobra. mirar mejor
  utter_ask_sum:
    - text: "Dime los nÃºmeros que quieres sumar."
    - text: "Â¿QuÃ© nÃºmeros deseas que sume por ti?"
    - text: "Por favor, indÃ­came los nÃºmeros que quieres sumar."
    - text: "Estoy listo para sumar. Â¿QuÃ© nÃºmeros debo usar?"
    - text: "Â¡Vamos a sumar! Â¿QuÃ© nÃºmeros quieres?"

  utter_ask_div:
  - text: "Dime los nÃºmeros que quieres dividir."
  - text: "Â¿QuÃ© nÃºmeros deseas que divida por ti?"
  - text: "Por favor, indÃ­came los nÃºmeros que quieres dividir."
  - text: "Estoy listo para dividir. Â¿QuÃ© nÃºmeros debo usar?"
  - text: "Â¡Vamos a dividir! Â¿CuÃ¡les son los dos nÃºmeros que quieres dividir?"

  utter_greet:
    - text: "Â¡Hola! Â¿En quÃ© te puedo ayudar hoy?"
    - text: "Â¡Hola! Estoy aquÃ­ para ayudarte, Â¿quÃ© necesitas?"
    - text: "Â¡Bienvenido! Â¿CÃ³mo puedo asistirte?"
    - text: "Â¡Hola! Â¿QuÃ© tal tu dÃ­a? CuÃ©ntame, Â¿cÃ³mo te puedo ayudar?"
    - text: "Â¡Hola! Estoy listo para ayudarte. Â¿QuÃ© necesitas?"

  utter_ask_wellbeing:
    - text: "Â¡Genial! Ahora que has llegado, todo va mejor. Â¿En quÃ© te puedo ayudar?"
    - text: "Â¡Estoy fenomenal! Â¿CÃ³mo te va a ti? Â¿En quÃ© puedo ayudarte hoy?"
    - text: "Â¡Todo estÃ¡ bien! Â¿Y tÃº? Â¿QuÃ© tal tu dÃ­a?"
    - text: "Â¡Perfecto! Ahora que estamos aquÃ­, Â¿en quÃ© te puedo asistir?"
    - text: "Â¡Todo marcha genial! Â¿Y tÃº, cÃ³mo estÃ¡s?"
    - text: "Â¡Estoy de maravilla! Â¿QuÃ© tal contigo?"
    - text: "Â¡Todo excelente! Ahora que estÃ¡s aquÃ­, Â¿en quÃ© te ayudo?"

  utter_mood_unhappy:
  - text: "Todos estamos tristes alguna vez, Â¡no te preocupes! Es completamente normal sentirse asÃ­. AnÃ­mate, seguro que te sientes mejor pronto. Estoy aquÃ­ si necesitas hablar o hacer algo divertido."
    image: "https://media.istockphoto.com/id/1389862392/es/foto/mano-de-mujer-acariciando-a-un-gato-de-jengibre-sobre-fondo-blanco-aislado.jpg?s=1024x1024&w=is&k=20&c=0GnKqGrGkgC2YDQbrLpnMdmwPnTYUNEBrGjbNKaSTvY="

  utter_did_that_help: # MIRAR ESTO MEJOR, POR AHORA LO BORRO DE STORIES
    - text: "Â¿Eso te ayudÃ³?"
    - text: "Â¿Fue Ãºtil la informaciÃ³n?"
    - text: "Â¿Te sirviÃ³ lo que te dije?"
    - text: "Â¿Esto resolviÃ³ tu duda?"
    - text: "Espero que te haya sido de ayuda, Â¿es asÃ­?"
    
  utter_happy:
    - text: "Â¡Estoy feliz de escuchar eso!"
    - text: "Â¡QuÃ© bien! ğŸ˜Š"
    - text: "Me alegra saber que estÃ¡s contento."
    - text: "Â¡Eso es genial! Â¡Sigamos asÃ­!"

  utter_goodbye:
    - text: "AdiÃ³s, Â¡nos vemos pronto!"
    - text: "Hasta luego, Â¡cuÃ­date mucho!"
    - text: "Â¡Chao! Espero verte pronto."
    - text: "Hasta la prÃ³xima, que tengas un gran dÃ­a."
    - text: "Nos vemos, Â¡que todo vaya bien!"


  utter_iamabot:
    - text: "Soy un bot diseÃ±ado para ayudarte."
    - text: "AsÃ­ es, soy un bot, pero estoy aquÃ­ para asistirte."
    - text: "Soy un asistente virtual creado para resolver tus dudas."
    - text: "Correcto, soy un bot, pero puedes contar conmigo para ayudarte."
    - text: "SÃ­, soy un programa de inteligencia artificial, Â¿en quÃ© te puedo ayudar?"


  utter_result_sum:
  - text: "La respuesta es {resultado}. Â¿Te gustarÃ­a intentar otra operaciÃ³n?"

  utter_result_difference:
  - text: "La resta es {resultado}. Â¡Buen trabajo!"

  utter_out_of_scope:
    - text: "No he entendido lo que dijiste. Â¿PodrÃ­as escribirlo de otra forma?"
    - text: "Lo siento, pero no comprendÃ­ tu mensaje. Intenta decirlo de otra manera."

  utter_agradecer:
    - text: "Â¡De nada! ğŸ˜Š"
    - text: "No hay de quÃ©. Â¡Siempre feliz de ayudar!"
    - text: "Â¡Con gusto! Si necesitas algo mÃ¡s, aquÃ­ estoy."
    - text: "Â¡Me alegra haber sido de ayuda! ğŸ˜ƒ"
    - text: "No hay problema, Â¡pregunta lo que necesites!"
    - text: "Â¡Gracias a ti por preguntar! ğŸ˜Š"
    - text: "Â¡Para eso estoy! Si tienes mÃ¡s dudas, dime."

  utter_fallback:
    - text: "Lo siento, no entendÃ­ lo que dijiste. Â¿Puedes reformularlo?"

  #utter_theory_div:
  #  - text: |
  #     Una divisiÃ³n se trata de un reparto en partes iguales.
  #     Hay una bolsa con 10 canicas y 5 amigos. Quieren repartir las canicas de modo que todos tengan la misma cantidad de ellas. 
  #     Uno de los amigos coge la bolsa y empieza a dar una canica a cada uno y sÃ­ mismo hasta que se acaban. Cuando finaliza el reparto, cada uno de los amigos ha conseguido 2 canicas. De esto podemos deducir que 10 canicas divididas entre 5 amigos es igual a que cada amigo tenga dos canicas.
  #    image: "https://www.pequeocio.com/wp-content/uploads/2019/01/partes-de-la-division.jpg"

#// =====================================================
#//              BOTONES TIPOS DE DIVISIONES
#// =====================================================
  utter_tipos_division:
    - text: "Â¿QuÃ© tipo de divisiÃ³n te gustarÃ­a aprender?\n\n"
      buttons:
      - title: "DivisiÃ³n de una cifra"
        payload: "/elegir_division_sola_cifra" #poner aqui el intent
      - title: "DivisiÃ³n de dos cifras"
        payload: "/elegir_division_dos_cifras"
      - title: "DivisiÃ³n con decimales"
        payload: "/elegir_division_decimales"
      - title: "DivisiÃ³n con residuo"
        payload: "/elegir_division_residuo"

  utter_division_sola_cifra:
    - text: "Â¡Mira quÃ© divertido! Hay 10 caramelos ğŸ¬ y los dos niÃ±os los estÃ¡n repartiendo para que a cada uno le toque lo mismo.
        Eso es dividir. ğŸ˜Š Al final, cada uno recibe 5 caramelos, porque 10 dividido entre 2 es igual a 5."
      image: "http://localhost:3000/1.gif"

  utter_division_dos_cifras:
    - text: "En las divisiones de dos cifras, el divisor tiene dos nÃºmeros. Ejemplo: 144 Ã· 12 = 12."

  utter_division_decimales:
    - text: |
       ğŸ”¹ Divide como siempre.
       ğŸ”¹ Si sobra algo, aÃ±ade una coma.
       ğŸ”¹ Pon un 0 al resto y sigue dividiendo.
       ğŸ”¹ Â¡Ya estÃ¡s trabajando con decimales!
      image: "http://localhost:3000/decimales.gif"

  utter_division_residuo:
    - text: |
        A veces, cuando dividimos, nos sobra algo.
        Si queremos saber exactamente cuÃ¡nto le toca a cada uno, usamos decimales.
        Pero si solo queremos saber cuÃ¡ntas veces cabe un nÃºmero sin fijarnos en los trozos pequeÃ±os, dejamos el residuo.

        Si tienes 7 caramelos para 2 amigos, puedes darles 3 a cada uno y te sobra 1.
        Como no puedes partir caramelos, decimos: 7 Ã· 2 = 3 y sobra 1
      image: "http://localhost:3000/residuo.gif"
#// =====================================================
#//              BOTONES TIPOS EJERCICIOS
#// =====================================================
  utter_request_practice_div:
    - text: "Â¿Como quieres practicar las divisiones?\n\n"
      buttons:
      - title: "DivisiÃ³n con enunciados"
        payload: "/elegir_division_enunciados" #poner aqui el intent
      - title: "DivisiÃ³n sueltas"
        payload: "/elegir_division_sueltas"

  utter_elegir_numero_ejercicios_enunciados:
    - text: "Â¿CuÃ¡ntos ejercicios con enunciados quieres practicarğŸ“?"
      buttons:
        - title: "2 enunciados"
          payload: /elegir_numero_ejercicios_enunciados{{"numero":"2"}}
        - title: "4 enunciados"
          payload: /elegir_numero_ejercicios_enunciados{{"numero":"4"}}
        - title: "6 enunciados"
          payload: /elegir_numero_ejercicios_enunciados{{"numero":"6"}}
        - title: "10 enunciados"
          payload: /elegir_numero_ejercicios_enunciados{{"numero":"10"}}

  utter_elegir_numero_ejercicios:
    - text: "Â¿CuÃ¡ntos ejercicios quieres practicar?"
      buttons:
        - title: "2 ejercicios"
          payload: /elegir_numero_ejercicios{{"numero":"2"}}
        - title: "4 ejercicios"
          payload: /elegir_numero_ejercicios{{"numero":"4"}}
        - title: "6 ejercicios"
          payload: /elegir_numero_ejercicios{{"numero":"6"}}
        - title: "10 ejercicios"
          payload: /elegir_numero_ejercicios{{"numero":"10"}}

  utter_elegir_nivel_dificultad:
     - text: "Nivel de dificultad"
       buttons:
        - title: "FÃ¡cil"
          payload: /elegir_dificultad{{"dificultad":"fÃ¡cil"}}
        - title: "Medio"
          payload: /elegir_dificultad{{"dificultad":"medio"}}
        - title: "DifÃ­cil-residuos"
          payload: /elegir_dificultad{{"dificultad":"difÃ­cil"}}
        - title: "Experto-decimales"
          payload: /elegir_dificultad{{"dificultad":"experto"}}

  utter_elegir_nivel_dificultad_enunciados:
     - text: "Nivel de dificultad para tus enunciados"
       buttons:
        - title: "FÃ¡cil"
          payload: /elegir_dificultad_enunciados{{"dificultad":"fÃ¡cil"}}
        - title: "Medio"
          payload: /elegir_dificultad_enunciados{{"dificultad":"medio"}}
        - title: "DifÃ­cil"
          payload: /elegir_dificultad_enunciados{{"dificultad":"difÃ­cil"}}
        - title: "Experto"
          payload: /elegir_dificultad_enunciados{{"dificultad":"experto"}}

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
